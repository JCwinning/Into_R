{
  "hash": "182430d90b081ad6fe74553ae61010f0",
  "result": {
    "engine": "knitr",
    "markdown": "---\ntitle: \"ggplot2 in R\"\nauthor: \"Tony D\"\n\nexecute:\n  warning: false\n  error: false\nformat:\n  html:\n    toc: true\n    toc-location: right\n    code-fold: show\n    code-tools: true\n    number-sections: false\n    code-block-bg: true\n    code-block-border-left: \"#31BAE9\"\n    code-copy: true\n---\n\n![](images/Screenshot 2023-07-08 at 5.03.46 PM.png){width=\"800\"}\n\n\nThis document provides a comprehensive introduction to `ggplot2`, a powerful and popular data visualization package for the R programming language. We will explore the fundamental concepts of the \"grammar of graphics,\" which underpins `ggplot2`, and demonstrate how to create a wide variety of plots, from basic scatter and line charts to more advanced visualizations like maps and animations.\n\n`ggplot2` is built on the idea that you can build any plot from the same set of components: a **data** set, a **coordinate system**, and **geoms** (the visual marks that represent data points). You'll learn how to combine these components to create elegant and informative graphics.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# This code chunk installs the necessary packages for this tutorial.\n# You only need to run this once.\npak::pak(c(\n  'ggplot2',\n  'ggthemr',\n  'gganimate',\n  'patchwork',\n  'ggthemes',\n  'tidyverse',\n  'gapminder',\n  'ggpubr',\n  'plotly',\n  'magick',\n  'reshape2',\n  'sf',\n  'legendry'\n))\n```\n:::\n\n\n`ggplot2` is an elegant and versatile data visualization package in R, based on the grammar of graphics. It allows you to build plots layer by layer, providing immense flexibility and control.\n\n\n\n# 1. Setup and Data Preparation\n\nBefore we start creating plots, we need to load the necessary libraries. The `tidyverse` is a collection of R packages designed for data science, and it includes `ggplot2`. We'll also load `gapminder` for a sample dataset and `reshape2` for the `tips` dataset.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(tidyverse)\nlibrary(gapminder)\nlibrary(ggpubr)\nlibrary(ggthemr)\nlibrary(ggplot2)\nlibrary(plotly)\nlibrary(magick)\nlibrary(reshape2)\n\n# It's good practice to check the version of the package you are using.\npackageVersion(\"ggplot2\")\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n[1] '4.0.0'\n```\n\n\n:::\n:::\n\n\nWe will be using two primary datasets for our examples:\n\n*   **`tips`**: A dataset from the `reshape2` package containing information about tips given in a restaurant.\n*   **`gapminder`**: A dataset from the `gapminder` package containing information about life expectancy, GDP per capita, and population for various countries over time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata(tips)\nhead(tips)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n  total_bill  tip    sex smoker day   time size\n1      16.99 1.01 Female     No Sun Dinner    2\n2      10.34 1.66   Male     No Sun Dinner    3\n3      21.01 3.50   Male     No Sun Dinner    3\n4      23.68 3.31   Male     No Sun Dinner    2\n5      24.59 3.61 Female     No Sun Dinner    4\n6      25.29 4.71   Male     No Sun Dinner    4\n```\n\n\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata001 = gapminder\nhead(data001)\n```\n\n::: {.cell-output .cell-output-stdout}\n\n```\n# A tibble: 6 Ã— 6\n  country     continent  year lifeExp      pop gdpPercap\n  <fct>       <fct>     <int>   <dbl>    <int>     <dbl>\n1 Afghanistan Asia       1952    28.8  8425333      779.\n2 Afghanistan Asia       1957    30.3  9240934      821.\n3 Afghanistan Asia       1962    32.0 10267083      853.\n4 Afghanistan Asia       1967    34.0 11537966      836.\n5 Afghanistan Asia       1972    36.1 13079460      740.\n6 Afghanistan Asia       1977    38.4 14880372      786.\n```\n\n\n:::\n:::\n\n\n# 2. The Grammar of Graphics: Core Concepts\n\nEvery `ggplot2` plot has three key components:\n\n1.  **Data**: The dataset containing the variables you want to plot.\n2.  **Aesthetics (`aes()`)**: The mapping of variables from your data to visual properties of the plot. This includes things like x and y position, color, size, and shape.\n3.  **Geoms (`geom_...()`)**: The geometric objects that represent your data. This could be points (`geom_point`), lines (`geom_line`), bars (`geom_bar`), etc.\n\n## Scatter Plot\n\nA scatter plot is one of the simplest and most common types of plots. It uses points to show the relationship between two continuous variables. We use `geom_point()` to create scatter plots.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill)) + geom_point()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-5-1.png){width=672}\n:::\n:::\n\n\n### Color by Group\n\nWe can introduce a third variable to the plot by mapping it to an aesthetic. For example, we can color the points by the `sex` of the person who paid the bill.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) + geom_point()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-6-1.png){width=672}\n:::\n:::\n\n\n### Size by Group\n\nSimilarly, we can map a variable to the `size` aesthetic to represent another dimension. Here, we size the points by the size of the party.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, colour = sex, size = size)) +\n  geom_point()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-7-1.png){width=672}\n:::\n:::\n\n\n## Line Plot\n\nLine plots are used to visualize trends over a continuous variable, such as time. We use `geom_line()` for this.\n\nFirst, let's aggregate the `gapminder` data to calculate the total population for each continent over the years.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002 = data001 %>%\n  group_by(continent, year) %>%\n  summarise(pop = sum(pop), .groups = 'drop')\n```\n:::\n\n\nNow, we can plot the population trend for Asia.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(data002 %>% filter(continent == 'Asia'), aes(x = year, y = pop)) +\n  geom_line()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-9-1.png){width=672}\n:::\n:::\n\n\n### Change Line Size\n\nYou can customize the appearance of the line by setting aesthetics within the `geom_line()` function.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(data002 %>% filter(continent == 'Asia'), aes(x = year, y = pop)) +\n  geom_line(size = 2)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-10-1.png){width=672}\n:::\n:::\n\n\n### Color by Group\n\nTo compare trends across different continents, we can map the `continent` variable to the `color` aesthetic.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(data002, aes(x = year, y = pop, colour = continent)) + geom_line()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-11-1.png){width=672}\n:::\n:::\n\n\n## Area Plot\n\nAn area plot is similar to a line plot, but the area under the line is filled in. This is useful for showing cumulative totals or magnitudes over time. We use `geom_area()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(data002 |> filter(continent == 'Asia'), aes(x = year, y = pop)) +\n  geom_area(fill = 'blue', alpha = 0.2)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-12-1.png){width=672}\n:::\n:::\n\n\n## Histogram\n\nA histogram displays the distribution of a single continuous variable by dividing the data into bins and showing the frequency of observations in each bin. We use `geom_histogram()`.\n\nLet's look at the distribution of GDP per capita in Asia and Africa in 1997.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002 = data001 %>% filter(year == 1997, continent %in% c('Asia', 'Africa'))\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = gdpPercap)) +\n  geom_histogram()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-14-1.png){width=672}\n:::\n:::\n\n\n### Color by Group\n\nWe can compare the distributions of different groups by using the `fill` aesthetic and setting `position = 'dodge'` to place the bars side-by-side.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = gdpPercap, fill = continent)) +\n  geom_histogram(position = 'dodge')\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-15-1.png){width=672}\n:::\n:::\n\n\n## Bar Chart\n\nBar charts are used to display the relationship between a categorical variable and a continuous variable. `geom_bar(stat=\"identity\")` is used when you want the height of the bars to represent values in the data.\n\nLet's look at the total population of each continent in 1997.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002 = data001 %>%\n  filter(year == 1997) %>%\n  group_by(continent) %>%\n  summarise(pop = sum(pop), .groups = 'drop')\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = continent, y = pop)) +\n  geom_bar(stat = \"identity\") +\n  scale_y_continuous(labels = scales::comma)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-17-1.png){width=672}\n:::\n:::\n\n\n### Show Numbers on Bars\n\nYou can add text labels to the bars using `geom_text()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = continent, y = pop)) +\n  geom_bar(stat = \"identity\") +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(label = pop), vjust = -0.2)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-18-1.png){width=672}\n:::\n:::\n\n\n### Change Bar Color\n\nThe `fill` argument within `geom_bar()` controls the color of the bars.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = continent, y = pop)) +\n  geom_bar(stat = \"identity\", fill = 'red') +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(label = pop), vjust = -0.2)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-19-1.png){width=672}\n:::\n:::\n\n\n### Bar Plot Order\n\nYou can reorder the bars based on a variable using the `reorder()` function within the `aes()` mapping.\n\nOrder by population in ascending order:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = reorder(continent, pop), y = pop)) +\n  geom_bar(stat = \"identity\", fill = 'red') +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(label = pop), vjust = -0.2)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-20-1.png){width=672}\n:::\n:::\n\n\nOrder by population in descending order:\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = reorder(continent, -pop), y = pop)) +\n  geom_bar(stat = \"identity\", fill = 'red') +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(label = pop), vjust = -0.2)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-21-1.png){width=672}\n:::\n:::\n\n\n### Horizontal Barplot\n\n`coord_flip()` swaps the x and y axes, creating a horizontal bar plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = reorder(continent, pop), y = pop)) +\n  geom_bar(stat = \"identity\", fill = 'red') +\n  scale_y_continuous(labels = scales::comma) +\n  geom_text(aes(label = pop), vjust = -0.2) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-22-1.png){width=672}\n:::\n:::\n\n\n### Adjust Bar Transparency\n\nThe `alpha` aesthetic controls the transparency of the bars.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = reorder(continent, pop), y = pop)) +\n  geom_bar(stat = \"identity\", fill = 'red', alpha = 0.5) +\n  coord_flip()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-23-1.png){width=672}\n:::\n:::\n\n\n### Adjust Bar Spacing to Axis\n\n`scale_y_continuous(expand = ...)` controls the space between the bars and the axis.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(data002, aes(x = reorder(continent, pop), y = pop)) +\n  geom_bar(stat = \"identity\", alpha = 0.5, fill = 'red') +\n  coord_flip() +\n  scale_y_continuous(expand = expansion(mult = c(0, .1)))\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-24-1.png){width=672}\n:::\n:::\n\n\n### Highlight One Bar\n\nYou can use `ifelse()` within the `fill` aesthetic and `scale_fill_manual()` to highlight a specific bar.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nggplot(\n  data002,\n  aes(\n    x = reorder(continent, pop),\n    y = pop,\n    fill = factor(ifelse(continent == \"Asia\", \"Highlighted\", \"Normal\"))\n  )\n) +\n  geom_bar(stat = \"identity\", alpha = 0.8, show.legend = FALSE) +\n  scale_fill_manual(values = c(\"Highlighted\" = \"red\", \"Normal\" = \"grey50\")) +\n  coord_flip() +\n  scale_y_continuous(expand = expansion(mult = c(0, .1)))\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-25-1.png){width=672}\n:::\n:::\n\n\n## Box Plot\n\nA box plot displays the distribution of a continuous variable across different categories. It shows the median, quartiles, and potential outliers. We use `geom_boxplot()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = day, y = tip, fill = sex)) + geom_boxplot()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-26-1.png){width=672}\n:::\n:::\n\n\n## Strip Plot (Jittered Points)\n\nA strip plot shows the distribution of a continuous variable for different categories by plotting individual points. `geom_jitter()` adds a small amount of random noise to the points to prevent overplotting.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = day, y = tip)) + geom_jitter()\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-27-1.png){width=672}\n:::\n:::\n\n\n### Color by Group\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = day, y = tip, color = sex)) +\n  geom_jitter(position = position_jitterdodge())\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-28-1.png){width=672}\n:::\n:::\n\n\n# 3. Facet Plots: Creating Small Multiples\n\nFacetting is a powerful feature in `ggplot2` that allows you to create multiple subplots, with each subplot showing a different subset of the data. This is useful for comparing distributions or trends across different groups.\n\n`facet_wrap()` creates a grid of plots, wrapping them into a specified number of rows and columns.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill)) +\n  geom_point(aes(color = sex)) +\n  facet_wrap(~day)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-29-1.png){width=672}\n:::\n:::\n\n\n### Control Number of Columns\n\nYou can control the number of columns in the facet grid using the `ncol` argument.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill)) +\n  geom_point(aes(color = sex)) +\n  facet_wrap(~day, ncol = 3)\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-30-1.png){width=672}\n:::\n:::\n\n\n# 4. Plot Customization: Titles, Axes, and Themes\n\n`ggplot2` provides a wide range of options for customizing the appearance of your plots.\n\n## Titles, Subtitles, and Captions\n\nYou can add a title, subtitle, and caption to your plot using `ggtitle()` and `labs()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  ggtitle(\"Tip by Sex\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-31-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  ggtitle(\"Tip by Sex\", subtitle = \"Subtitle of the plot\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-32-1.png){width=672}\n:::\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  ggtitle(\"Tip by Sex\") +\n  labs(caption = \"This is a footnote\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-33-1.png){width=672}\n:::\n:::\n\n\n## Adjust Plot Size and Text\n\nThe `theme()` function allows you to customize almost every aspect of your plot's appearance. `plot.margin` controls the margins around the plot, and `text` controls the font size.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  ggtitle(\"Tip by Sex\") +\n  theme(plot.margin = margin(2, 2, 5, 5, \"cm\"))\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-34-1.png){width=672}\n:::\n:::\n\n\nYou can also center the title and increase the overall text size.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  ggtitle(\"Tip by Sex\") +\n  labs(caption = \"This is a footnote\")\n\np +\n  theme(plot.title = element_text(hjust = 0.5), text = element_text(size = 15))\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-35-1.png){width=672}\n:::\n:::\n\n\n## Change Axis Labels\n\nYou can change the axis labels using `xlab()` and `ylab()`, or for more control, `scale_x_continuous()` and `scale_y_continuous()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  xlab(\"New X Name\") +\n  ylab(\"New Y Name\")\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-36-1.png){width=672}\n:::\n:::\n\n\n## Axis Limits and Second Axis\n\n### Axis Limits\n\nYou can set the limits of the x and y axes using `xlim()` and `ylim()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  scale_x_continuous(name = \"New X Name\") +\n  scale_y_continuous(name = \"New Y Name\")\np + xlim(min = 0, 20)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-37-1.png){width=672}\n:::\n:::\n\n\n### Adding a Second Axis\n\nYou can add a secondary y-axis to your plot using `sec_axis()` within `scale_y_continuous()`. This is useful when you want to display two different variables with different scales on the same plot.\n\n\n::: {.cell}\n\n```{.r .cell-code}\ndata002 = data001 %>%\n  group_by(year, continent) %>%\n  summarise(pop = sum(pop), lifeExp = mean(lifeExp), .groups = 'drop') %>%\n  filter(continent == 'Asia')\n\n# We need a coefficient to scale the second variable to fit on the plot.\ncoeff = 1 / 40000000\n\np = ggplot(data002, aes(x = year, y = pop)) +\n  geom_col() +\n  geom_line(aes(y = lifeExp / coeff), size = 1, color = \"red\") +\n  scale_y_continuous(\n    \"Population\",\n    sec.axis = sec_axis(~ . * coeff, name = \"Life Expectancy\"),\n    labels = scales::comma\n  )\np\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-38-1.png){width=672}\n:::\n:::\n\n\n# 5. Applying Themes for a Professional Look\n\n`ggplot2` comes with several built-in themes that allow you to quickly change the overall appearance of your plot. The `ggthemes` package provides even more options.\n\n::: {.panel-tabset .nav-pills}\n\n## bbc plot\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# install.packages('devtools')\ndevtools::install_github('bbc/bbplot')\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(bbplot)\n\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  scale_x_continuous(name = \"New X Name\") +\n  scale_y_continuous(name = \"New Y Name\")\np + bbc_style()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-40-1.png){width=672}\n:::\n:::\n\n\n## theme_bw()\n\nA classic black and white theme.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np = ggplot(tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  scale_x_continuous(name = \"New X Name\") +\n  scale_y_continuous(name = \"New Y Name\")\np + theme_bw()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-41-1.png){width=672}\n:::\n:::\n\n\n## theme_economist()\n\nA theme that mimics the style of plots in *The Economist*.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggthemes)\np + theme_economist()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-42-1.png){width=672}\n:::\n:::\n\n\n:::\n\n# 6. Advanced Features and Extensions\n\n## Convert ggplot to Plotly for Interactivity\n\nThe `plotly` package can convert your static `ggplot2` plots into interactive, web-based visualizations with features like tooltips and zooming.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(ggplot2)\nlibrary(plotly)\np = ggplot(data = tips, aes(x = tip, y = total_bill, color = sex)) +\n  geom_point() +\n  scale_x_continuous(name = \"New X Name\") +\n  scale_y_continuous(name = \"New Y Name\")\n\nggplotly(p)\n```\n\n::: {.cell-output-display}\n\n```{=html}\n<div class=\"plotly html-widget html-fill-item\" id=\"htmlwidget-eed4f3ff300b189a5cb4\" style=\"width:100%;height:464px;\"></div>\n<script type=\"application/json\" data-for=\"htmlwidget-eed4f3ff300b189a5cb4\">{\"x\":{\"data\":[{\"x\":[1.01,3.6099999999999999,5,3.02,1.6699999999999999,3.5,2.75,2.23,3,3,2.4500000000000002,3.0699999999999998,2.6000000000000001,5.2000000000000002,1.5,2.4700000000000002,1,3,3.1400000000000001,5,2.2000000000000002,1.8300000000000001,5.1699999999999999,1,4.2999999999999998,3.25,2.5,3,2.5,3.48,4.0800000000000001,4,1,4,3.5,1.5,1.8,2.9199999999999999,1.6799999999999999,2.52,4.2000000000000002,2,2,2.8300000000000001,1.5,2,3.25,1.25,2,2,2.75,3.5,5,2.2999999999999998,1.5,1.3600000000000001,1.6299999999999999,5.1399999999999997,3.75,2.6099999999999999,2,3,1.6100000000000001,2,4,3.5,3.5,4.1900000000000004,5,2,2.0099999999999998,2,2.5,3.23,2.23,2.5,6.5,1.1000000000000001,3.0899999999999999,3.48,3,2.5,2,2.8799999999999999,4.6699999999999999,2,3],\"y\":[16.989999999999998,24.59,35.259999999999998,14.83,10.33,16.969999999999999,20.289999999999999,15.77,19.649999999999999,15.06,20.690000000000001,16.93,10.289999999999999,34.810000000000002,26.41,16.449999999999999,3.0699999999999998,17.07,26.859999999999999,25.280000000000001,14.73,10.07,34.829999999999998,5.75,16.32,22.75,11.35,15.380000000000001,44.299999999999997,22.420000000000002,20.920000000000002,14.31,7.25,25.710000000000001,17.309999999999999,10.65,12.43,24.079999999999998,13.42,12.48,29.800000000000001,14.52,11.380000000000001,20.27,11.17,12.26,18.260000000000002,8.5099999999999998,10.33,14.15,13.16,17.469999999999999,27.050000000000001,16.43,8.3499999999999996,18.640000000000001,11.869999999999999,29.850000000000001,25,13.390000000000001,16.210000000000001,17.510000000000002,10.59,10.630000000000001,9.5999999999999996,20.899999999999999,18.149999999999999,19.809999999999999,43.109999999999999,13,12.74,13,16.399999999999999,16.469999999999999,12.76,13.27,28.170000000000002,12.9,30.140000000000001,13.42,15.98,16.27,10.09,22.120000000000001,35.829999999999998,27.18,18.780000000000001],\"text\":[\"tip:  1.01<br />total_bill: 16.99<br />sex: Female\",\"tip:  3.61<br />total_bill: 24.59<br />sex: Female\",\"tip:  5.00<br />total_bill: 35.26<br />sex: Female\",\"tip:  3.02<br />total_bill: 14.83<br />sex: Female\",\"tip:  1.67<br />total_bill: 10.33<br />sex: Female\",\"tip:  3.50<br />total_bill: 16.97<br />sex: Female\",\"tip:  2.75<br />total_bill: 20.29<br />sex: Female\",\"tip:  2.23<br />total_bill: 15.77<br />sex: Female\",\"tip:  3.00<br />total_bill: 19.65<br />sex: Female\",\"tip:  3.00<br />total_bill: 15.06<br />sex: Female\",\"tip:  2.45<br />total_bill: 20.69<br />sex: Female\",\"tip:  3.07<br />total_bill: 16.93<br />sex: Female\",\"tip:  2.60<br />total_bill: 10.29<br />sex: Female\",\"tip:  5.20<br />total_bill: 34.81<br />sex: Female\",\"tip:  1.50<br />total_bill: 26.41<br />sex: Female\",\"tip:  2.47<br />total_bill: 16.45<br />sex: Female\",\"tip:  1.00<br />total_bill:  3.07<br />sex: Female\",\"tip:  3.00<br />total_bill: 17.07<br />sex: Female\",\"tip:  3.14<br />total_bill: 26.86<br />sex: Female\",\"tip:  5.00<br />total_bill: 25.28<br />sex: Female\",\"tip:  2.20<br />total_bill: 14.73<br />sex: Female\",\"tip:  1.83<br />total_bill: 10.07<br />sex: Female\",\"tip:  5.17<br />total_bill: 34.83<br />sex: Female\",\"tip:  1.00<br />total_bill:  5.75<br />sex: Female\",\"tip:  4.30<br />total_bill: 16.32<br />sex: Female\",\"tip:  3.25<br />total_bill: 22.75<br />sex: Female\",\"tip:  2.50<br />total_bill: 11.35<br />sex: Female\",\"tip:  3.00<br />total_bill: 15.38<br />sex: Female\",\"tip:  2.50<br />total_bill: 44.30<br />sex: Female\",\"tip:  3.48<br />total_bill: 22.42<br />sex: Female\",\"tip:  4.08<br />total_bill: 20.92<br />sex: Female\",\"tip:  4.00<br />total_bill: 14.31<br />sex: Female\",\"tip:  1.00<br />total_bill:  7.25<br />sex: Female\",\"tip:  4.00<br />total_bill: 25.71<br />sex: Female\",\"tip:  3.50<br />total_bill: 17.31<br />sex: Female\",\"tip:  1.50<br />total_bill: 10.65<br />sex: Female\",\"tip:  1.80<br />total_bill: 12.43<br />sex: Female\",\"tip:  2.92<br />total_bill: 24.08<br />sex: Female\",\"tip:  1.68<br />total_bill: 13.42<br />sex: Female\",\"tip:  2.52<br />total_bill: 12.48<br />sex: Female\",\"tip:  4.20<br />total_bill: 29.80<br />sex: Female\",\"tip:  2.00<br />total_bill: 14.52<br />sex: Female\",\"tip:  2.00<br />total_bill: 11.38<br />sex: Female\",\"tip:  2.83<br />total_bill: 20.27<br />sex: Female\",\"tip:  1.50<br />total_bill: 11.17<br />sex: Female\",\"tip:  2.00<br />total_bill: 12.26<br />sex: Female\",\"tip:  3.25<br />total_bill: 18.26<br />sex: Female\",\"tip:  1.25<br />total_bill:  8.51<br />sex: Female\",\"tip:  2.00<br />total_bill: 10.33<br />sex: Female\",\"tip:  2.00<br />total_bill: 14.15<br />sex: Female\",\"tip:  2.75<br />total_bill: 13.16<br />sex: Female\",\"tip:  3.50<br />total_bill: 17.47<br />sex: Female\",\"tip:  5.00<br />total_bill: 27.05<br />sex: Female\",\"tip:  2.30<br />total_bill: 16.43<br />sex: Female\",\"tip:  1.50<br />total_bill:  8.35<br />sex: Female\",\"tip:  1.36<br />total_bill: 18.64<br />sex: Female\",\"tip:  1.63<br />total_bill: 11.87<br />sex: Female\",\"tip:  5.14<br />total_bill: 29.85<br />sex: Female\",\"tip:  3.75<br />total_bill: 25.00<br />sex: Female\",\"tip:  2.61<br />total_bill: 13.39<br />sex: Female\",\"tip:  2.00<br />total_bill: 16.21<br />sex: Female\",\"tip:  3.00<br />total_bill: 17.51<br />sex: Female\",\"tip:  1.61<br />total_bill: 10.59<br />sex: Female\",\"tip:  2.00<br />total_bill: 10.63<br />sex: Female\",\"tip:  4.00<br />total_bill:  9.60<br />sex: Female\",\"tip:  3.50<br />total_bill: 20.90<br />sex: Female\",\"tip:  3.50<br />total_bill: 18.15<br />sex: Female\",\"tip:  4.19<br />total_bill: 19.81<br />sex: Female\",\"tip:  5.00<br />total_bill: 43.11<br />sex: Female\",\"tip:  2.00<br />total_bill: 13.00<br />sex: Female\",\"tip:  2.01<br />total_bill: 12.74<br />sex: Female\",\"tip:  2.00<br />total_bill: 13.00<br />sex: Female\",\"tip:  2.50<br />total_bill: 16.40<br />sex: Female\",\"tip:  3.23<br />total_bill: 16.47<br />sex: Female\",\"tip:  2.23<br />total_bill: 12.76<br />sex: Female\",\"tip:  2.50<br />total_bill: 13.27<br />sex: Female\",\"tip:  6.50<br />total_bill: 28.17<br />sex: Female\",\"tip:  1.10<br />total_bill: 12.90<br />sex: Female\",\"tip:  3.09<br />total_bill: 30.14<br />sex: Female\",\"tip:  3.48<br />total_bill: 13.42<br />sex: Female\",\"tip:  3.00<br />total_bill: 15.98<br />sex: Female\",\"tip:  2.50<br />total_bill: 16.27<br />sex: Female\",\"tip:  2.00<br />total_bill: 10.09<br />sex: Female\",\"tip:  2.88<br />total_bill: 22.12<br />sex: Female\",\"tip:  4.67<br />total_bill: 35.83<br />sex: Female\",\"tip:  2.00<br />total_bill: 27.18<br />sex: Female\",\"tip:  3.00<br />total_bill: 18.78<br />sex: Female\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(248,118,109,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(248,118,109,1)\"}},\"hoveron\":\"points\",\"name\":\"Female\",\"legendgroup\":\"Female\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null},{\"x\":[1.6599999999999999,3.5,3.3100000000000001,4.71,2,3.1200000000000001,1.96,3.23,1.71,1.5700000000000001,3,3.9199999999999999,3.71,3.3500000000000001,4.0800000000000001,7.5800000000000001,3.1800000000000002,2.3399999999999999,2,2,4.2999999999999998,1.45,2.5,3.27,3.6000000000000001,2,2.3100000000000001,5,2.2400000000000002,2.54,3.0600000000000001,1.3200000000000001,5.5999999999999996,3,5,6,2.0499999999999998,3,2.5,1.5600000000000001,4.3399999999999999,3.5099999999999998,3,1.76,6.7300000000000004,3.21,2,1.98,3.7599999999999998,2.6400000000000001,3.1499999999999999,2.0099999999999998,2.0899999999999999,1.97,1.25,3.0800000000000001,4,3,2.71,3,3.3999999999999999,5,2.0299999999999998,2,4,5.8499999999999996,3,3,3.5,4.7300000000000004,4,1.5,3,1.5,1.6399999999999999,4.0599999999999996,4.29,3.7599999999999998,3,4,2.5499999999999998,5.0700000000000003,2.3100000000000001,2.5,2,1.48,2.1800000000000002,1.5,2,6.7000000000000002,5,1.73,2,2.5,2,2.7400000000000002,2,2,5,2,3.5,2.5,2,3.48,2.2400000000000002,4.5,10,3.1600000000000001,5.1500000000000004,3.1800000000000002,4,3.1099999999999999,2,2,3.5499999999999998,3.6800000000000002,5.6500000000000004,3.5,6.5,3,5,2,4,1.5,2.5600000000000001,2.02,4,1.4399999999999999,2,2,4,4,3.4100000000000001,3,2.0299999999999998,2,5.1600000000000001,9,3,1.5,1.4399999999999999,2.2000000000000002,1.9199999999999999,1.5800000000000001,3,2.7200000000000002,2,3,3.3900000000000001,1.47,3,1.25,1,1.1699999999999999,5.9199999999999999,2,1.75],\"y\":[10.34,21.010000000000002,23.68,25.289999999999999,8.7699999999999996,26.879999999999999,15.039999999999999,14.779999999999999,10.27,15.42,18.43,21.579999999999998,16.289999999999999,20.649999999999999,17.920000000000002,39.420000000000002,19.82,17.809999999999999,13.369999999999999,12.69,21.699999999999999,9.5500000000000007,18.350000000000001,17.780000000000001,24.059999999999999,16.309999999999999,18.690000000000001,31.27,16.039999999999999,17.460000000000001,13.94,9.6799999999999997,30.399999999999999,18.289999999999999,22.23,32.399999999999999,28.550000000000001,18.039999999999999,12.539999999999999,9.9399999999999995,25.559999999999999,19.489999999999998,38.009999999999998,11.24,48.270000000000003,20.289999999999999,13.81,11.02,18.289999999999999,17.59,20.079999999999998,20.23,15.01,12.02,10.51,17.920000000000002,27.199999999999999,22.760000000000002,17.289999999999999,19.440000000000001,16.66,32.68,15.98,13.029999999999999,18.280000000000001,24.710000000000001,21.16,28.969999999999999,22.489999999999998,40.170000000000002,27.280000000000001,12.029999999999999,21.010000000000002,12.460000000000001,15.359999999999999,20.489999999999998,25.210000000000001,18.239999999999998,14,38.07,23.949999999999999,29.93,11.69,14.26,15.949999999999999,8.5199999999999996,22.82,19.079999999999998,16,34.299999999999997,41.189999999999998,9.7799999999999994,7.5099999999999998,14.07,13.130000000000001,17.260000000000002,24.550000000000001,19.77,48.170000000000002,16.489999999999998,21.5,12.66,13.81,24.52,20.760000000000002,31.710000000000001,50.810000000000002,15.81,7.25,31.850000000000001,16.82,32.899999999999999,17.890000000000001,14.48,34.630000000000003,34.649999999999999,23.329999999999998,45.350000000000001,23.170000000000002,40.549999999999997,20.690000000000001,30.460000000000001,23.100000000000001,15.69,28.440000000000001,15.48,16.579999999999998,7.5599999999999996,10.34,13.51,18.710000000000001,20.530000000000001,26.59,38.729999999999997,24.27,30.059999999999999,25.890000000000001,48.329999999999998,28.149999999999999,11.59,7.7400000000000002,12.16,8.5800000000000001,13.42,20.449999999999999,13.279999999999999,24.010000000000002,15.69,11.609999999999999,10.77,15.529999999999999,10.07,12.6,32.829999999999998,29.030000000000001,22.670000000000002,17.82],\"text\":[\"tip:  1.66<br />total_bill: 10.34<br />sex: Male\",\"tip:  3.50<br />total_bill: 21.01<br />sex: Male\",\"tip:  3.31<br />total_bill: 23.68<br />sex: Male\",\"tip:  4.71<br />total_bill: 25.29<br />sex: Male\",\"tip:  2.00<br />total_bill:  8.77<br />sex: Male\",\"tip:  3.12<br />total_bill: 26.88<br />sex: Male\",\"tip:  1.96<br />total_bill: 15.04<br />sex: Male\",\"tip:  3.23<br />total_bill: 14.78<br />sex: Male\",\"tip:  1.71<br />total_bill: 10.27<br />sex: Male\",\"tip:  1.57<br />total_bill: 15.42<br />sex: Male\",\"tip:  3.00<br />total_bill: 18.43<br />sex: Male\",\"tip:  3.92<br />total_bill: 21.58<br />sex: Male\",\"tip:  3.71<br />total_bill: 16.29<br />sex: Male\",\"tip:  3.35<br />total_bill: 20.65<br />sex: Male\",\"tip:  4.08<br />total_bill: 17.92<br />sex: Male\",\"tip:  7.58<br />total_bill: 39.42<br />sex: Male\",\"tip:  3.18<br />total_bill: 19.82<br />sex: Male\",\"tip:  2.34<br />total_bill: 17.81<br />sex: Male\",\"tip:  2.00<br />total_bill: 13.37<br />sex: Male\",\"tip:  2.00<br />total_bill: 12.69<br />sex: Male\",\"tip:  4.30<br />total_bill: 21.70<br />sex: Male\",\"tip:  1.45<br />total_bill:  9.55<br />sex: Male\",\"tip:  2.50<br />total_bill: 18.35<br />sex: Male\",\"tip:  3.27<br />total_bill: 17.78<br />sex: Male\",\"tip:  3.60<br />total_bill: 24.06<br />sex: Male\",\"tip:  2.00<br />total_bill: 16.31<br />sex: Male\",\"tip:  2.31<br />total_bill: 18.69<br />sex: Male\",\"tip:  5.00<br />total_bill: 31.27<br />sex: Male\",\"tip:  2.24<br />total_bill: 16.04<br />sex: Male\",\"tip:  2.54<br />total_bill: 17.46<br />sex: Male\",\"tip:  3.06<br />total_bill: 13.94<br />sex: Male\",\"tip:  1.32<br />total_bill:  9.68<br />sex: Male\",\"tip:  5.60<br />total_bill: 30.40<br />sex: Male\",\"tip:  3.00<br />total_bill: 18.29<br />sex: Male\",\"tip:  5.00<br />total_bill: 22.23<br />sex: Male\",\"tip:  6.00<br />total_bill: 32.40<br />sex: Male\",\"tip:  2.05<br />total_bill: 28.55<br />sex: Male\",\"tip:  3.00<br />total_bill: 18.04<br />sex: Male\",\"tip:  2.50<br />total_bill: 12.54<br />sex: Male\",\"tip:  1.56<br />total_bill:  9.94<br />sex: Male\",\"tip:  4.34<br />total_bill: 25.56<br />sex: Male\",\"tip:  3.51<br />total_bill: 19.49<br />sex: Male\",\"tip:  3.00<br />total_bill: 38.01<br />sex: Male\",\"tip:  1.76<br />total_bill: 11.24<br />sex: Male\",\"tip:  6.73<br />total_bill: 48.27<br />sex: Male\",\"tip:  3.21<br />total_bill: 20.29<br />sex: Male\",\"tip:  2.00<br />total_bill: 13.81<br />sex: Male\",\"tip:  1.98<br />total_bill: 11.02<br />sex: Male\",\"tip:  3.76<br />total_bill: 18.29<br />sex: Male\",\"tip:  2.64<br />total_bill: 17.59<br />sex: Male\",\"tip:  3.15<br />total_bill: 20.08<br />sex: Male\",\"tip:  2.01<br />total_bill: 20.23<br />sex: Male\",\"tip:  2.09<br />total_bill: 15.01<br />sex: Male\",\"tip:  1.97<br />total_bill: 12.02<br />sex: Male\",\"tip:  1.25<br />total_bill: 10.51<br />sex: Male\",\"tip:  3.08<br />total_bill: 17.92<br />sex: Male\",\"tip:  4.00<br />total_bill: 27.20<br />sex: Male\",\"tip:  3.00<br />total_bill: 22.76<br />sex: Male\",\"tip:  2.71<br />total_bill: 17.29<br />sex: Male\",\"tip:  3.00<br />total_bill: 19.44<br />sex: Male\",\"tip:  3.40<br />total_bill: 16.66<br />sex: Male\",\"tip:  5.00<br />total_bill: 32.68<br />sex: Male\",\"tip:  2.03<br />total_bill: 15.98<br />sex: Male\",\"tip:  2.00<br />total_bill: 13.03<br />sex: Male\",\"tip:  4.00<br />total_bill: 18.28<br />sex: Male\",\"tip:  5.85<br />total_bill: 24.71<br />sex: Male\",\"tip:  3.00<br />total_bill: 21.16<br />sex: Male\",\"tip:  3.00<br />total_bill: 28.97<br />sex: Male\",\"tip:  3.50<br />total_bill: 22.49<br />sex: Male\",\"tip:  4.73<br />total_bill: 40.17<br />sex: Male\",\"tip:  4.00<br />total_bill: 27.28<br />sex: Male\",\"tip:  1.50<br />total_bill: 12.03<br />sex: Male\",\"tip:  3.00<br />total_bill: 21.01<br />sex: Male\",\"tip:  1.50<br />total_bill: 12.46<br />sex: Male\",\"tip:  1.64<br />total_bill: 15.36<br />sex: Male\",\"tip:  4.06<br />total_bill: 20.49<br />sex: Male\",\"tip:  4.29<br />total_bill: 25.21<br />sex: Male\",\"tip:  3.76<br />total_bill: 18.24<br />sex: Male\",\"tip:  3.00<br />total_bill: 14.00<br />sex: Male\",\"tip:  4.00<br />total_bill: 38.07<br />sex: Male\",\"tip:  2.55<br />total_bill: 23.95<br />sex: Male\",\"tip:  5.07<br />total_bill: 29.93<br />sex: Male\",\"tip:  2.31<br />total_bill: 11.69<br />sex: Male\",\"tip:  2.50<br />total_bill: 14.26<br />sex: Male\",\"tip:  2.00<br />total_bill: 15.95<br />sex: Male\",\"tip:  1.48<br />total_bill:  8.52<br />sex: Male\",\"tip:  2.18<br />total_bill: 22.82<br />sex: Male\",\"tip:  1.50<br />total_bill: 19.08<br />sex: Male\",\"tip:  2.00<br />total_bill: 16.00<br />sex: Male\",\"tip:  6.70<br />total_bill: 34.30<br />sex: Male\",\"tip:  5.00<br />total_bill: 41.19<br />sex: Male\",\"tip:  1.73<br />total_bill:  9.78<br />sex: Male\",\"tip:  2.00<br />total_bill:  7.51<br />sex: Male\",\"tip:  2.50<br />total_bill: 14.07<br />sex: Male\",\"tip:  2.00<br />total_bill: 13.13<br />sex: Male\",\"tip:  2.74<br />total_bill: 17.26<br />sex: Male\",\"tip:  2.00<br />total_bill: 24.55<br />sex: Male\",\"tip:  2.00<br />total_bill: 19.77<br />sex: Male\",\"tip:  5.00<br />total_bill: 48.17<br />sex: Male\",\"tip:  2.00<br />total_bill: 16.49<br />sex: Male\",\"tip:  3.50<br />total_bill: 21.50<br />sex: Male\",\"tip:  2.50<br />total_bill: 12.66<br />sex: Male\",\"tip:  2.00<br />total_bill: 13.81<br />sex: Male\",\"tip:  3.48<br />total_bill: 24.52<br />sex: Male\",\"tip:  2.24<br />total_bill: 20.76<br />sex: Male\",\"tip:  4.50<br />total_bill: 31.71<br />sex: Male\",\"tip: 10.00<br />total_bill: 50.81<br />sex: Male\",\"tip:  3.16<br />total_bill: 15.81<br />sex: Male\",\"tip:  5.15<br />total_bill:  7.25<br />sex: Male\",\"tip:  3.18<br />total_bill: 31.85<br />sex: Male\",\"tip:  4.00<br />total_bill: 16.82<br />sex: Male\",\"tip:  3.11<br />total_bill: 32.90<br />sex: Male\",\"tip:  2.00<br />total_bill: 17.89<br />sex: Male\",\"tip:  2.00<br />total_bill: 14.48<br />sex: Male\",\"tip:  3.55<br />total_bill: 34.63<br />sex: Male\",\"tip:  3.68<br />total_bill: 34.65<br />sex: Male\",\"tip:  5.65<br />total_bill: 23.33<br />sex: Male\",\"tip:  3.50<br />total_bill: 45.35<br />sex: Male\",\"tip:  6.50<br />total_bill: 23.17<br />sex: Male\",\"tip:  3.00<br />total_bill: 40.55<br />sex: Male\",\"tip:  5.00<br />total_bill: 20.69<br />sex: Male\",\"tip:  2.00<br />total_bill: 30.46<br />sex: Male\",\"tip:  4.00<br />total_bill: 23.10<br />sex: Male\",\"tip:  1.50<br />total_bill: 15.69<br />sex: Male\",\"tip:  2.56<br />total_bill: 28.44<br />sex: Male\",\"tip:  2.02<br />total_bill: 15.48<br />sex: Male\",\"tip:  4.00<br />total_bill: 16.58<br />sex: Male\",\"tip:  1.44<br />total_bill:  7.56<br />sex: Male\",\"tip:  2.00<br />total_bill: 10.34<br />sex: Male\",\"tip:  2.00<br />total_bill: 13.51<br />sex: Male\",\"tip:  4.00<br />total_bill: 18.71<br />sex: Male\",\"tip:  4.00<br />total_bill: 20.53<br />sex: Male\",\"tip:  3.41<br />total_bill: 26.59<br />sex: Male\",\"tip:  3.00<br />total_bill: 38.73<br />sex: Male\",\"tip:  2.03<br />total_bill: 24.27<br />sex: Male\",\"tip:  2.00<br />total_bill: 30.06<br />sex: Male\",\"tip:  5.16<br />total_bill: 25.89<br />sex: Male\",\"tip:  9.00<br />total_bill: 48.33<br />sex: Male\",\"tip:  3.00<br />total_bill: 28.15<br />sex: Male\",\"tip:  1.50<br />total_bill: 11.59<br />sex: Male\",\"tip:  1.44<br />total_bill:  7.74<br />sex: Male\",\"tip:  2.20<br />total_bill: 12.16<br />sex: Male\",\"tip:  1.92<br />total_bill:  8.58<br />sex: Male\",\"tip:  1.58<br />total_bill: 13.42<br />sex: Male\",\"tip:  3.00<br />total_bill: 20.45<br />sex: Male\",\"tip:  2.72<br />total_bill: 13.28<br />sex: Male\",\"tip:  2.00<br />total_bill: 24.01<br />sex: Male\",\"tip:  3.00<br />total_bill: 15.69<br />sex: Male\",\"tip:  3.39<br />total_bill: 11.61<br />sex: Male\",\"tip:  1.47<br />total_bill: 10.77<br />sex: Male\",\"tip:  3.00<br />total_bill: 15.53<br />sex: Male\",\"tip:  1.25<br />total_bill: 10.07<br />sex: Male\",\"tip:  1.00<br />total_bill: 12.60<br />sex: Male\",\"tip:  1.17<br />total_bill: 32.83<br />sex: Male\",\"tip:  5.92<br />total_bill: 29.03<br />sex: Male\",\"tip:  2.00<br />total_bill: 22.67<br />sex: Male\",\"tip:  1.75<br />total_bill: 17.82<br />sex: Male\"],\"type\":\"scatter\",\"mode\":\"markers\",\"marker\":{\"autocolorscale\":false,\"color\":\"rgba(0,191,196,1)\",\"opacity\":1,\"size\":5.6692913385826778,\"symbol\":\"circle\",\"line\":{\"width\":1.8897637795275593,\"color\":\"rgba(0,191,196,1)\"}},\"hoveron\":\"points\",\"name\":\"Male\",\"legendgroup\":\"Male\",\"showlegend\":true,\"xaxis\":\"x\",\"yaxis\":\"y\",\"hoverinfo\":\"text\",\"frame\":null}],\"layout\":{\"margin\":{\"t\":23.305936073059364,\"r\":7.3059360730593621,\"b\":37.260273972602747,\"l\":37.260273972602747},\"plot_bgcolor\":\"rgba(235,235,235,1)\",\"paper_bgcolor\":\"rgba(255,255,255,1)\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724},\"xaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.55000000000000004,10.449999999999999],\"tickmode\":\"array\",\"ticktext\":[\"2.5\",\"5.0\",\"7.5\",\"10.0\"],\"tickvals\":[2.5,5,7.5,10],\"categoryorder\":\"array\",\"categoryarray\":[\"2.5\",\"5.0\",\"7.5\",\"10.0\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"y\",\"title\":{\"text\":\"New X Name\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"yaxis\":{\"domain\":[0,1],\"automargin\":true,\"type\":\"linear\",\"autorange\":false,\"range\":[0.68299999999999983,53.197000000000003],\"tickmode\":\"array\",\"ticktext\":[\"10\",\"20\",\"30\",\"40\",\"50\"],\"tickvals\":[10,20,30,40,50],\"categoryorder\":\"array\",\"categoryarray\":[\"10\",\"20\",\"30\",\"40\",\"50\"],\"nticks\":null,\"ticks\":\"outside\",\"tickcolor\":\"rgba(51,51,51,1)\",\"ticklen\":3.6529680365296811,\"tickwidth\":0,\"showticklabels\":true,\"tickfont\":{\"color\":\"rgba(77,77,77,1)\",\"family\":\"\",\"size\":11.68949771689498},\"tickangle\":-0,\"showline\":false,\"linecolor\":null,\"linewidth\":0,\"showgrid\":true,\"gridcolor\":\"rgba(255,255,255,1)\",\"gridwidth\":0,\"zeroline\":false,\"anchor\":\"x\",\"title\":{\"text\":\"New Y Name\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}},\"hoverformat\":\".2f\"},\"shapes\":[{\"type\":\"rect\",\"fillcolor\":null,\"line\":{\"color\":null,\"width\":0,\"linetype\":[]},\"yref\":\"paper\",\"xref\":\"paper\",\"layer\":\"below\",\"x0\":0,\"x1\":1,\"y0\":0,\"y1\":1}],\"showlegend\":true,\"legend\":{\"bgcolor\":\"rgba(255,255,255,1)\",\"bordercolor\":\"transparent\",\"borderwidth\":0,\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":11.68949771689498},\"title\":{\"text\":\"sex\",\"font\":{\"color\":\"rgba(0,0,0,1)\",\"family\":\"\",\"size\":14.611872146118724}}},\"hovermode\":\"closest\",\"barmode\":\"relative\"},\"config\":{\"doubleClick\":\"reset\",\"modeBarButtonsToAdd\":[\"hoverclosest\",\"hovercompare\"],\"showSendToCloud\":false},\"source\":\"A\",\"attrs\":{\"560ca1327ce\":{\"x\":{},\"y\":{},\"colour\":{},\"type\":\"scatter\"}},\"cur_data\":\"560ca1327ce\",\"visdat\":{\"560ca1327ce\":[\"function (y) \",\"x\"]},\"highlight\":{\"on\":\"plotly_click\",\"persistent\":false,\"dynamic\":false,\"selectize\":false,\"opacityDim\":0.20000000000000001,\"selected\":{\"opacity\":1},\"debounce\":0},\"shinyEvents\":[\"plotly_hover\",\"plotly_click\",\"plotly_selected\",\"plotly_relayout\",\"plotly_brushed\",\"plotly_brushing\",\"plotly_clickannotation\",\"plotly_doubleclick\",\"plotly_deselect\",\"plotly_afterplot\",\"plotly_sunburstclick\"],\"base_url\":\"https://plot.ly\"},\"evals\":[],\"jsHooks\":[]}</script>\n```\n\n:::\n:::\n\n\n## Save Your Plots\n\n`ggsave()` makes it easy to save your plots to a file. You can specify the filename, format, dimensions, and resolution.\n\n\n::: {.cell}\n\n```{.r .cell-code}\np + theme_economist()\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-44-1.png){width=672}\n:::\n\n```{.r .cell-code}\nggsave(\"myplot.png\", width = 6, height = 4, units = \"in\", dpi = 300)\n```\n:::\n\n\n## Add Images to Your Charts\n\nThe `magick` package allows you to read and manipulate images, which you can then add to your `ggplot2` plots using `grid::grid.raster()`.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# Add your company's logo to the graph you created\nlogo <- image_read(\"images/logo1.png\")\n\np\ngrid::grid.raster(\n  logo,\n  x = 0.1,\n  y = 0,\n  just = c('left', 'bottom'),\n  width = unit(0.4, 'inches')\n)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-45-1.png){width=672}\n:::\n:::\n\n\n## Create Animated Plots with gganimate\n\nThe `gganimate` package extends `ggplot2` to create stunning animations, which are great for showing changes over time.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(gganimate)\n\n# Note: country_colors is not defined in the original code.\n# We will use the default ggplot2 color palette.\np = ggplot(\n  gapminder,\n  aes(x = gdpPercap, y = lifeExp, size = pop, colour = continent)\n) +\n  geom_point(alpha = 0.7, show.legend = FALSE) +\n  scale_size(range = c(2, 12)) +\n  scale_x_log10() +\n  labs(\n    title = 'Year: {as.integer(frame_time)}',\n    x = 'GDP per capita',\n    y = 'life expectancy'\n  ) +\n  transition_time(year) +\n  ease_aes('linear')\n\n# To render the animation, you would typically use `animate(p)` or `anim_save()`\nanimate(p)\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-46-1.gif)\n:::\n:::\n\n\n## Create Maps with ggplot2\n\n`ggplot2` can also be used to create maps. The `sf` package is commonly used for working with spatial data.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(sf)\n\n# Data from https://geojson-maps.kyd.au/\ngeoj_data <- read_sf(\"data/custom.geo.json\")\n\ngeoj_data_asia = geoj_data |> filter(continent == \"Asia\")\n\nggplot() +\n  geom_sf(\n    data = geoj_data_asia,\n    aes(fill = income_grp),\n    linewidth = 0.2,\n    color = \"white\",\n    alpha = 1\n  )\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-47-1.png){width=672}\n:::\n:::\n\n\n# 7. ggplot2 Extension Packages\n\nThe `ggplot2` ecosystem is vast, with many extension packages that add new geoms, themes, and functionalities.\n\n## patchwork: Combining Multiple Plots\n\nThe `patchwork` package provides a simple and intuitive syntax for combining multiple `ggplot2` plots into a single graphic.\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(patchwork)\n\np1 <- ggplot(mtcars) + geom_point(aes(mpg, disp))\np2 <- ggplot(mtcars) + geom_boxplot(aes(gear, disp, group = gear))\np3 <- ggplot(mtcars) + geom_smooth(aes(disp, qsec))\np4 <- ggplot(mtcars) + geom_bar(aes(carb))\n\n(p1 | p2 | p3) / p4\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-48-1.png){width=672}\n:::\n:::\n\n\n## legendry: Advanced Legend Customization\n\nThe `legendry` package provides tools for creating more complex and customized legends.\n\n\n::: {.cell}\n\n```{.r .cell-code}\n# pak::pak('legendry') # Uncomment to install\n```\n:::\n\n\n\n::: {.cell}\n\n```{.r .cell-code}\nlibrary(legendry)\n\nbase_plot <- ggplot(mpg, aes(displ, hwy, colour = cty)) +\n  geom_point() +\n  labs(\n    x = \"Engine displacement\",\n    y = \"Highway miles per gallon\",\n    col = \"City miles\nper gallon\"\n  ) +\n  theme(axis.line = element_line())\n\n# A partial guide to display a bracket\nefficient_bracket <- primitive_bracket(\n  key = key_range_manual(start = 25, end = Inf, name = \"Efficient\"),\n  bracket = \"square\",\n  theme = theme(\n    legend.text = element_text(angle = 90, hjust = 0.5),\n    axis.text.y.left = element_text(angle = 90, hjust = 0.5)\n  )\n)\n\nbase_plot + guides(y = guide_axis_stack(\"axis\", efficient_bracket))\n```\n\n::: {.cell-output-display}\n![](1-ggplot2_files/figure-html/unnamed-chunk-50-1.png){width=672}\n:::\n:::\n\n\n# 8. Conclusion and Further Resources\n\nThis document has provided a tour of the fundamental concepts and capabilities of `ggplot2`. By understanding the grammar of graphics, you can create a vast range of visualizations to explore and communicate your data.\n\nFor more in-depth information, please refer to the following resources:\n\n-   [ggplot2 Official Website](https://ggplot2.tidyverse.org/)\n-   [R for Data Science, Chapter 3: Data Visualization](https://r4ds.had.co.nz/data-visualisation.html)\n-   [RStudio ggplot2 Cheatsheet](https://rstudio.github.io/cheatsheets/html/data-transformation.html)\n-   [The `patchwork` Package](https://patchwork.data-imaginist.com/)\n-   [The `gganimate` Package](https://gganimate.com/)\n-   [The `ggthemes` Package](https://yutannihilation.github.io/allYourFigureAreBelongToUs/ggthemes/)\n-   [The `magick` Package](https://cran.r-project.org/web/packages/magick/vignettes/intro.html)\n\n\n\n\n\n\n",
    "supporting": [
      "1-ggplot2_files"
    ],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../site_libs/htmltools-fill-0.5.8.1/fill.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/htmlwidgets-1.6.4/htmlwidgets.js\"></script>\n<script src=\"../site_libs/plotly-binding-4.11.0/plotly.js\"></script>\n<script src=\"../site_libs/typedarray-0.1/typedarray.min.js\"></script>\n<script src=\"../site_libs/jquery-3.5.1/jquery.min.js\"></script>\n<link href=\"../site_libs/crosstalk-1.2.1/css/crosstalk.min.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/crosstalk-1.2.1/js/crosstalk.min.js\"></script>\n<link href=\"../site_libs/plotly-htmlwidgets-css-2.11.1/plotly-htmlwidgets.css\" rel=\"stylesheet\" />\n<script src=\"../site_libs/plotly-main-2.11.1/plotly-latest.min.js\"></script>\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}